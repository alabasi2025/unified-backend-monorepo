import { Injectable } from '@nestjs/common';
import { PrismaService } from '../../../../../../prisma/prisma.service';

@Injectable()
export class PagesService {
  // يجب تعديل المسار لاستيراد PrismaService بناءً على الهيكلية الفعلية للمشروع
  // تم افتراض مسار نسبي بناءً على المسار المطلوب للملف
  constructor(private prisma: PrismaService) {}

  async create(data: any) {
    // افتراض أن اسم نموذج Prisma هو 'Page'
    return this.prisma.page.create({ data });
  }

  async findAll() {
    return this.prisma.page.findMany({ where: { archived: false } });
  }

  async findOne(id: number) {
    return this.prisma.page.findUnique({ where: { id, archived: false } });
  }

  async update(id: number, data: any) {
    return this.prisma.page.update({ where: { id }, data });
  }

  async delete(id: number) {
    // الحذف الفعلي (Hard Delete)
    return this.prisma.page.delete({ where: { id } });
  }

  async archive(id: number) {
    // الأرشفة (Soft Delete)
    return this.prisma.page.update({
      where: { id },
      data: { archived: true },
    });
  }
}
